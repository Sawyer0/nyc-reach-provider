"use strict";(self.webpackChunknew_projectt=self.webpackChunknew_projectt||[]).push([[987],{987:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(43),o=a(213);const n="https://data.cityofnewyork.us/resource/7btz-mnc8.json",i={NODE_ENV:"production",PUBLIC_URL:"/nyc-reach-provider",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://data.cityofnewyork.us/resource/7btz-mnc8.json",REACT_APP_API_TOKEN:"vhyDLJEWvcp58QDQixAENQzxn",REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiZGF3YW4iLCJhIjoiY2x0MGRlbGdqMG1qNjJpbzF0ZXJmaDEzNSJ9.VYqIdoD-xDJfYUtfADN_og"}.REACT_MAPBOX_GEOCODING_URL,s="pk.eyJ1IjoiZGF3YW4iLCJhIjoiY2x0MGRlbGdqMG1qNjJpbzF0ZXJmaDEzNSJ9.VYqIdoD-xDJfYUtfADN_og",c=(e,t)=>{const[a,c]=(0,r.useState)(""),[l,u]=(0,r.useState)("practice_borough");return{searchTerm:a,searchAttribute:l,validAttributes:{practice_borough:{display:"Borough",values:["Bronx","Manhattan","Brooklyn","Queens","Staten Island"]},primary_specialty:{display:"Specialty",values:["Internal Medicine","Family Medicine","Pediatrics","OB/GYN","Cardiology","Primary Care"]},organization_type:{display:"Organization Type",values:["Small Practice","Group Practice","Hospital","Community Health Center"]}},handleAttributeChange:e=>{u(e),c("")},handleSearchChange:e=>{c(e)},handleSubmit:async r=>{if(r.preventDefault(),a)try{const r=await(async(e,t)=>{try{if(!i)throw console.error("Missing environment variables"),new Error("Configuration error");const e={$where:"practice_borough='".concat(t,"'"),$limit:5};console.log("Fetching with params:",e);const a=await o.A.get(n,{params:e});return await Promise.all(a.data.map((async e=>{try{if(e.practice_zip_code){const t=await o.A.get("".concat(i,"/").concat(e.practice_zip_code,".json"),{params:{access_token:s,limit:1,country:"US",types:"postcode",proximity:"-73.935242,40.730610"}});if(t.data.features&&t.data.features.length>0){const[a,r]=t.data.features[0].center;return{...e,longitude:a,latitude:r}}}return e}catch(t){return console.error("Geocoding error:",t),e}})))}catch(r){var a;throw console.error("Error details:",(null===(a=r.response)||void 0===a?void 0:a.data)||r),r}})(0,a);e(r||[]),t(!0)}catch(c){console.error("Error fetching providers:",c),e([])}}}};var l=a(579);const u=e=>{let{setProviders:t,setIsSearchSubmitted:a}=e;const{searchTerm:r,searchAttribute:o,validAttributes:n,handleAttributeChange:i,handleSearchChange:s,handleSubmit:u}=c(t,a);return(0,l.jsxs)("form",{onSubmit:u,className:"search-form",children:[(0,l.jsx)("select",{value:o,onChange:e=>i(e.target.value),className:"search-select",children:Object.entries(n).map((e=>{let[t,a]=e;return(0,l.jsx)("option",{value:t,children:a.display},t)}))}),(0,l.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"search-select",children:[(0,l.jsxs)("option",{value:"",children:["Select ",n[o].display]}),n[o].values.map((e=>(0,l.jsx)("option",{value:e,children:e},e)))]}),(0,l.jsx)("button",{type:"submit",className:"search-button",children:"Search"})]})}}}]);
//# sourceMappingURL=987.691a73a5.chunk.js.map