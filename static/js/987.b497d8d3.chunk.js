"use strict";(self.webpackChunknew_projectt=self.webpackChunknew_projectt||[]).push([[987],{987:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(43),c=a(213);const s="https://data.cityofnewyork.us/resource/7btz-mnc8.json",o="https://api.mapbox.com/geocoding/v5/mapbox.places",n="pk.eyJ1IjoiZGF3YW4iLCJhIjoiY2x0MGRlbGdqMG1qNjJpbzF0ZXJmaDEzNSJ9.VYqIdoD-xDJfYUtfADN_og",i=(e,t)=>{const[a,i]=(0,r.useState)(""),[l,u]=(0,r.useState)("practice_borough");return{searchTerm:a,searchAttribute:l,validAttributes:{practice_borough:{display:"Borough",values:["Bronx","Manhattan","Brooklyn","Queens","Staten Island"]},primary_specialty:{display:"Specialty",values:["Internal Medicine","Family Medicine","Pediatrics","OB/GYN","Cardiology","Primary Care"]},organization_type:{display:"Organization Type",values:["Small Practice","Group Practice","Hospital","Community Health Center"]}},handleAttributeChange:e=>{u(e),i("")},handleSearchChange:e=>{i(e)},handleSubmit:async r=>{if(r.preventDefault(),a)try{const r=await(async(e,t)=>{try{const e={$where:"practice_borough='".concat(t,"'"),$limit:5};console.log("Fetching with params:",e);const a=await c.A.get(s,{params:e});return await Promise.all(a.data.map((async e=>{try{if(e.practice_zip_code){const t=await c.A.get("".concat(o,"/").concat(e.practice_zip_code,".json"),{params:{access_token:n,limit:1,country:"US",types:"postcode",proximity:"-73.935242,40.730610"}});if(t.data.features&&t.data.features.length>0){const[a,r]=t.data.features[0].center;return{...e,longitude:a,latitude:r}}}return e}catch(t){return console.error("Geocoding error:",t),e}})))}catch(r){var a;throw console.error("Error details:",(null===(a=r.response)||void 0===a?void 0:a.data)||r),r}})(0,a);e(r||[]),t(!0)}catch(i){console.error("Error fetching providers:",i),e([])}}}};var l=a(579);const u=e=>{let{setProviders:t,setIsSearchSubmitted:a}=e;const{searchTerm:r,searchAttribute:c,validAttributes:s,handleAttributeChange:o,handleSearchChange:n,handleSubmit:u}=i(t,a);return(0,l.jsxs)("form",{onSubmit:u,className:"search-form",children:[(0,l.jsx)("select",{value:c,onChange:e=>o(e.target.value),className:"search-select",children:Object.entries(s).map((e=>{let[t,a]=e;return(0,l.jsx)("option",{value:t,children:a.display},t)}))}),(0,l.jsxs)("select",{value:r,onChange:e=>n(e.target.value),className:"search-select",children:[(0,l.jsxs)("option",{value:"",children:["Select ",s[c].display]}),s[c].values.map((e=>(0,l.jsx)("option",{value:e,children:e},e)))]}),(0,l.jsx)("button",{type:"submit",className:"search-button",children:"Search"})]})}}}]);
//# sourceMappingURL=987.b497d8d3.chunk.js.map